\documentclass[11pt]{article}

\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}

\usepackage{fullpage}

\usepackage{graphicx}
\usepackage{verbatim}
\usepackage{siunitx}
\usepackage{pgfplots}
\pgfplotsset{compat=1.8}

\usepackage[colorlinks=false,pdfborder={0 0 0}]{hyperref}
\usepackage[all]{hypcap}


\title{Astro 585: HW 7}
\author{Codename: The Maxwell-JÃ¼ttner Distribution}



\begin{document}


\maketitle

My git repository is here: \url{https://github.com/hsgg/astro585}, clone URL
\url{https://github.com/hsgg/astro585.git}.


\section{PBS, Clusters, LionXV}

$\pi \approx \num{3.140996000000}$. Hm, $\pi$\ldots

The following, busy plot shows the computation time as function of number of
worker threads, for both the loop and the map operations with \num{e8}
iterations. For each operation and number of workers, the code was run three
times -- all on one node, all on different nodes, and finally any combination
that the pbs system saw fit to use.

\begin{center}
  \begin{tikzpicture}
    \begin{axis}[
	ymin=0,
	xlabel=Number of worker processes,
	ylabel=Computation time in wall-seconds,
        width=0.8\textwidth,
        height=10cm,
        legend columns=2,
        legend to name=thelegend
      ]

      \addplot table[x index=0,y index=1]{q1_diffnodes.dat};
      \addlegendentry{loop, diff nodes};

      \addplot table[x index=0,y index=2]{q1_diffnodes.dat};
      \addlegendentry{map, diff nodes};


      \addplot table[x index=0,y index=1]{q1_samenode.dat};
      \addlegendentry{loop, same node};

      \addplot table[x index=0,y index=2]{q1_samenode.dat};
      \addlegendentry{map, same node};


      \addplot table[x index=0,y index=1]{q1_anynode.dat};
      \addlegendentry{loop, any node};

      \addplot table[x index=0,y index=2]{q1_anynode.dat};
      \addlegendentry{map, any node};
    \end{axis}
  \end{tikzpicture}
  \ref{thelegend}
\end{center}

Of course, it took longest to get started the job that needed 8 cores on a
single node. Contention with others users is highest there.

For reference, these are the commands to run it:
\begin{center}
\begin{verbatim}
    $ cd hw7/
    $ ./mkqsubscript.sh > q1_script.sh
    $ chmod +x q1_script.sh
    $ ./q1_script.sh
\end{verbatim}
\end{center}
Then wait. To extract the numbers:
\begin{center}
\begin{verbatim}
    $ ./Q1_get_result.sh
\end{verbatim}
\end{center}
Then recompile the \LaTeX{} document \path{soln.tex} to recreate the graph.



\end{document}

% vim: set sw=2 sts=2 et :
